

const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };

    export const chatSession = model.startChat({
      generationConfig,
   // safetySettings: Adjust safety settings
   // See https://ai.google.dev/gemini-api/docs/safety-settings
      history: [
        {
            role: "user",
            parts: [
              {text: "Generate Travel Plan for Location: Đà Lạt, for 3 Days and 2 Night for Family with a Moderate budget with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days and 2 night with each day plan with best time to visit in JSON format."},
            ],
          },
          {
            role: "model",
            parts: [
              {text: "```json\n{\n  \"flight\": {\n    \"details\": \"Round trip flight from [Your Departure City] to Lien Khuong Airport (DLI) in Da Lat.\",\n    \"price\": \"Varies depending on your departure city and time of year. Use a flight search engine like [Google Flights](https://www.google.com/flights) or [Skyscanner](https://www.skyscanner.com/) to find the best deals.\",\n    \"booking_url\": \"Use the flight search engines mentioned above to book your flight.\"\n  },\n  \"hotel\": [\n    {\n      \"name\": \"Ana Mandara Villas Dalat\",\n      \"address\": \"10 Tran Hung Dao, Ward 1, Da Lat City, Lam Dong Province, Vietnam\",\n      \"price\": \"From $70 per night\",\n      \"image_url\": \"https://images.unsplash.com/photo-1576406457834-552c25ab626b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n      \"geo_coordinates\": \"11.9462, 108.4220\",\n      \"rating\": 4.5,\n      \"description\": \"A luxury villa resort offering stunning views of the city and surrounding mountains. Features a swimming pool, spa, and various dining options.\"\n    },\n    {\n      \"name\": \"The Dalat Palace Hotel\",\n      \"address\": \"1 Tran Phu, Ward 1, Da Lat City, Lam Dong Province, Vietnam\",\n      \"price\": \"From $50 per night\",\n      \"image_url\": \"https://images.unsplash.com/photo-1534710407807-4b374c806620?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n      \"geo_coordinates\": \"11.9459, 108.4266\",\n      \"rating\": 4,\n      \"description\": \"A historic hotel with French colonial architecture offering comfortable rooms and a central location.\"\n    },\n    {\n      \"name\": \"Dalat De L'ang Hotel\",\n      \"address\": \"15 Nguyen Thi Minh Khai, Ward 10, Da Lat City, Lam Dong Province, Vietnam\",\n      \"price\": \"From $35 per night\",\n      \"image_url\": \"https://images.unsplash.com/photo-1590678788716-506962c9771b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n      \"geo_coordinates\": \"11.9448, 108.4299\",\n      \"rating\": 3.5,\n      \"description\": \"A mid-range hotel with modern rooms and a convenient location near the city center.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": \"Day 1\",\n      \"activities\": [\n        {\n          \"time\": \"Morning (8:00 AM - 12:00 PM)\",\n          \"place\": \"Crazy House\",\n          \"details\": \"A quirky, surrealist architectural wonder designed by Vietnamese architect Dang Viet Nga. Explore its whimsical rooms and passages, inspired by nature and fantasy.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1576406457834-552c25ab626b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.9462, 108.4220\",\n          \"ticket_pricing\": \"Around $5 per person\",\n          \"time_to_travel\": \"1-2 hours\"\n        },\n        {\n          \"time\": \"Afternoon (1:00 PM - 4:00 PM)\",\n          \"place\": \"Dalat Flower Gardens\",\n          \"details\": \"A vibrant display of flowers, orchids, and roses, showcasing the beauty of Da Lat's floral industry.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1534710407807-4b374c806620?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.9459, 108.4266\",\n          \"ticket_pricing\": \"Around $2 per person\",\n          \"time_to_travel\": \"1-2 hours\"\n        },\n        {\n          \"time\": \"Evening (5:00 PM - 8:00 PM)\",\n          \"place\": \"Xuan Huong Lake\",\n          \"details\": \"A picturesque lake surrounded by pine trees, offering scenic walks, boat rides, and a relaxing atmosphere.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1590678788716-506962c9771b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.9448, 108.4299\",\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"1-2 hours\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 2\",\n      \"activities\": [\n        {\n          \"time\": \"Morning (8:00 AM - 12:00 PM)\",\n          \"place\": \"Lang Biang Mountain\",\n          \"details\": \"Hike or take a jeep to the top of this mountain for breathtaking views of Da Lat. You can also enjoy local cuisine at the nearby restaurants.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1605687708957-47897ffdf415?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.9084, 108.4381\",\n          \"ticket_pricing\": \"Around $3 per person for jeep ride\",\n          \"time_to_travel\": \"2-3 hours\"\n        },\n        {\n          \"time\": \"Afternoon (1:00 PM - 4:00 PM)\",\n          \"place\": \"Dambri Waterfall\",\n          \"details\": \"Explore a stunning waterfall cascading down rocky cliffs. Enjoy a refreshing dip in the cool waters or take a cable car ride for a panoramic view.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1549346546-1b8e294d2ab5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.7620, 108.3897\",\n          \"ticket_pricing\": \"Around $5 per person\",\n          \"time_to_travel\": \"2-3 hours\"\n        },\n        {\n          \"time\": \"Evening (5:00 PM - 8:00 PM)\",\n          \"place\": \"Da Lat Night Market\",\n          \"details\": \"Explore a bustling night market filled with street food, souvenirs, and local handicrafts.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1557716247-002476f16837?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.9458, 108.4274\",\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"1-2 hours\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 3\",\n      \"activities\": [\n        {\n          \"time\": \"Morning (8:00 AM - 12:00 PM)\",\n          \"place\": \"Linh Phuoc Pagoda\",\n          \"details\": \"A beautiful Buddhist temple adorned with intricate ceramic mosaics, offering stunning views of the city.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1506335611406-00c940029f04?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.9557, 108.4277\",\n          \"ticket_pricing\": \"Around $2 per person\",\n          \"time_to_travel\": \"1-2 hours\"\n        },\n        {\n          \"time\": \"Afternoon (1:00 PM - 4:00 PM)\",\n          \"place\": \"Bao Dai Summer Palace\",\n          \"details\": \"Visit the former summer residence of the last emperor of Vietnam, showcasing French colonial architecture and beautiful gardens.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1523755239749-740043426b2a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.9576, 108.4183\",\n          \"ticket_pricing\": \"Around $3 per person\",\n          \"time_to_travel\": \"1-2 hours\"\n        },\n        {\n          \"time\": \"Evening (5:00 PM - 7:00 PM)\",\n          \"place\": \"Da Lat Railway Station\",\n          \"details\": \"Admire the charming French colonial architecture of this historic railway station, a popular spot for photos.\",\n          \"image_url\": \"https://images.unsplash.com/photo-1606558029786-58761c498ff2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80\",\n          \"geo_coordinates\": \"11.9467, 108.4283\",\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"1 hour\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Notes:**\n\n* This is a suggested itinerary and can be adjusted based on your family's interests and preferences.\n* Ticket prices are approximate and may vary.\n* You can use Google Maps or other navigation apps to find directions to each location.\n* This itinerary provides a balance of attractions, activities, and relaxation.\n* Remember to pack comfortable shoes for walking and appropriate clothing for the weather.\n* Be sure to taste the local Da Lat specialties like coffee, strawberries, and fresh produce.\n\nThis JSON format provides you with a structured and organized travel plan for Da Lat. You can easily customize it based on your budget and interests. Enjoy your family trip to this beautiful city! \n"},
            ],
          },
      ],
    });
  
    //const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
   // console.log(result.response.text());
  
